{"version":3,"file":"static/js/45.706b72cf.chunk.js","mappings":"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","sources":["api/movie.js","webpack://react-homework-template/./src/components/Button/button.module.css?6dda","components/Button/Button.jsx","webpack://react-homework-template/./src/components/MoviesSearchForm/movies-search-form.module.css?b54a","components/MoviesSearchForm/MoviesSearchForm.jsx","../node_modules/nanoid/index.browser.js","webpack://react-homework-template/./src/components/MoviesSearchList/movies-search-list.module.css?d99f","components/MoviesSearchList/MoviesSearchList.jsx","webpack://react-homework-template/./src/components/MoviesSearch/movies-search.module.css?498e","components/MoviesSearch/MoviesSearch.jsx","pages/MoviesPage/MoviesPage.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://api.themoviedb.org/3',\n});\n\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNGFjNzI1MTA4Mjc2ZDkyM2RlMjQzOTE4NzUwNjJjNSIsInN1YiI6IjY1YjUwMjhhNGYzM2FkMDE3YTBiYTM1MiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.DVikyztACIvDZrPSWL56RBOBtNnjH3jDZKwNSqkZN54',\n  },\n};\n\nexport const getMoviesDetails = id => {\n  return instance.get(\n    `/movie/${id}?language=en-US&api_key=d4ac725108276d923de24391875062c5`,\n    options\n  );\n};\n\nexport const getMoviesCredits = id => {\n  return instance.get(\n    `/movie/${id}/credits?language=en-US&api_key=d4ac725108276d923de24391875062c5`,\n    options\n  );\n};\n\nexport const getMoviesReviews = id => {\n  return instance.get(\n    `/movie/${id}/reviews?language=en-US&api_key=d4ac725108276d923de24391875062c5`,\n    options\n  );\n};\n\nexport const searchMovies = (q, page = 1) => {\n  return instance.get(\n    `/search/movie?query=${q}&include_adult=false&language=en-US&page=${page}&api_key=d4ac725108276d923de24391875062c5`,\n    options\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"button_btn__HeAxz\"};","import styles from './button.module.css';\n\nconst Button = ({ onClick, type = 'submit', children }) => {\n  return (\n    <button onClick={onClick} type={type} className={styles.btn}>\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nexport default {\"fieldGroup\":\"movies-search-form_fieldGroup__AQMts\",\"inputContainer\":\"movies-search-form_inputContainer__ADsgl\",\"form\":\"movies-search-form_form__WR6FS\",\"label\":\"movies-search-form_label__NYBK7\",\"input\":\"movies-search-form_input__JHgRn\",\"button\":\"movies-search-form_button__sadNU\"};","import { useState, useEffect, useRef, useMemo } from 'react';\nimport { nanoid } from 'nanoid';\n\nimport styles from './movies-search-form.module.css';\n\nconst MoviesSearchForm = ({ onSubmit }) => {\n  const [state, setState] = useState({\n    search: '',\n  });\n\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit({ ...state });\n    reset();\n  };\n\n  const reset = () => {\n    setState({\n      search: '',\n    });\n  };\n\n  const searchId = useMemo(() => nanoid(), []);\n\n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <div className={styles.fieldGroup}>\n        <label htmlFor={searchId}></label>\n        <div className={styles.inputContainer}>\n          <input\n            id={searchId}\n            ref={inputRef}\n            value={state.search}\n            onChange={handleChange}\n            required\n            type=\"text\"\n            name=\"search\"\n            placeholder=\"Enter search phrase\"\n            className={styles.input}\n          />\n          <button className={styles.button} type=\"submit\">\n            <span className={styles.label}>Search</span>\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n};\n\nexport default MoviesSearchForm;\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"movies-search-list_container__xiAik\",\"list\":\"movies-search-list_list__Y2Yad\"};","import { Link, useLocation } from 'react-router-dom';\n\nimport styles from './movies-search-list.module.css';\n\nconst MoviesSearchList = ({ items }) => {\n  const location = useLocation();\n\n  const elements = items.map(({ id, title }) => (\n    <li key={id} className={styles.item}>\n      <Link\n        className={styles.link}\n        to={`/movies/${id}`}\n        state={{ from: location }}\n      >\n        {title}\n      </Link>\n    </li>\n  ));\n\n  return (\n    <div className={styles.container}>\n      <ul className={styles.list}>{elements}</ul>\n    </div>\n  );\n};\n\nexport default MoviesSearchList;\n","// extracted by mini-css-extract-plugin\nexport default {\"loadMoreWrapper\":\"movies-search_loadMoreWrapper__EOBDu\",\"button\":\"movies-search_button__5p70E\"};","import { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Button from '../Button/Button';\nimport Loader from '../Loader/Loader';\n\nimport MoviesSearchForm from 'components/MoviesSearchForm/MoviesSearchForm';\nimport MoviesSearchList from 'components/MoviesSearchList/MoviesSearchList';\n\nimport { searchMovies } from '../../api/movie';\n\nimport styles from './movies-search.module.css';\n\nconst MoviesSearch = () => {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const search = searchParams.get('search');\n  const page = searchParams.get('page');\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      try {\n        setLoading(true);\n        const { data } = await searchMovies(search, page);\n        // const { results } = respMovies.data;\n        setMovies(prevMovies =>\n          data.results?.length ? [...prevMovies, ...data.results] : prevMovies\n        );\n        console.log(data.results);\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (search) {\n      fetchMovies();\n    }\n  }, [search, page]);\n\n  const handleSearch = ({ search }) => {\n    setSearchParams({ search, page: 1 });\n    setMovies([]);\n  };\n\n  const loadMore = () => setSearchParams({ search, page: Number(page) + 1 });\n\n  const isMovies = Boolean(movies.length);\n  const isMoreMovies = Boolean(movies.length % 20 === 0);\n\n  return (\n    <>\n      <MoviesSearchForm onSubmit={handleSearch} />\n      {error && <p className={styles.error}>{error}</p>}\n      {loading && <Loader />}\n      {isMovies && <MoviesSearchList items={movies} />}\n      {isMovies && isMoreMovies && (\n        <div className={styles.loadMoreWrapper}>\n          <Button className={styles.button} onClick={loadMore} type=\"button\">\n            Load more\n          </Button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MoviesSearch;\n","import MoviesSearch from 'components/MoviesSearch/MoviesSearch';\n\nconst MoviesPage = () => {\n  return (\n    <div>\n      <MoviesSearch />\n    </div>\n  );\n};\n\nexport default MoviesPage;\n"],"names":["instance","axios","baseURL","options","method","headers","accept","Authorization","getMoviesDetails","id","get","concat","getMoviesCredits","getMoviesReviews","searchMovies","q","page","arguments","length","undefined","_ref","onClick","_ref$type","type","children","_jsx","className","styles","onSubmit","_useState","useState","search","_useState2","_slicedToArray","state","setState","inputRef","useRef","useEffect","current","focus","reset","searchId","useMemo","size","crypto","getRandomValues","Uint8Array","reduce","byte","toString","toUpperCase","nanoid","e","preventDefault","_objectSpread","_jsxs","htmlFor","ref","value","onChange","_ref2","target","name","_defineProperty","required","placeholder","items","location","useLocation","elements","map","title","Link","to","from","movies","setMovies","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useSearchParams","useSearchParams","_useSearchParams2","searchParams","setSearchParams","fetchMovies","_asyncToGenerator","_regeneratorRuntime","_callee","_yield$searchMovies","data","_context","prev","next","sent","prevMovies","_data$results","results","_toConsumableArray","console","log","t0","message","finish","stop","apply","isMovies","Boolean","isMoreMovies","_Fragment","MoviesSearchForm","Loader","MoviesSearchList","Button","Number","MoviesSearch"],"sourceRoot":""}